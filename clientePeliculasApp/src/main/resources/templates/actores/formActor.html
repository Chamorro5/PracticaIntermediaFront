<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>PeliculasApp | Aplicación de gestión de peliculas</title>
    <link th:href="@{/css/bootstrap.min.css}" rel="stylesheet">
    <style>
        .form-textarea {
            box-sizing: border-box;
            width: 100%;
            min-height: 150px; /* Establece una altura mínima para el textarea */
        }
        .imagen-col img {
            width: 35%; /* Ajusta el tamaño de la imagen para ser responsiva */
            height: auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h2 th:text="${titInicio}"
        class="text-secondary border border-success border-top-0 border-left-0 border-right-0"></h2>
    <form th:action="@{/cactores/guardar/}" method="post" th:object="${actor}">
        <div th:if="${#fields.hasErrors('*')}" class='alert alert-danger' role='alert'>
            Por favor corrija los siguientes errores:
            <ul>
                <li th:each="err : ${#fields.errors('*')}" th:text="${err}"/>
            </ul>
        </div>
        <div class="mb-3">
            <label for="nombre" class="form-label">Nombre</label>
            <input type="text" class="form-control" th:field="*{nombre}" id="nombre" name="titulo"
                   placeholder="Escriba el nombre del actor" required="required">
        </div>
        <div class="mb-3">
            <label for="pais" class="form-label">Pais</label>
            <input type="text" class="form-control" th:field="*{pais}" id="pais" name="pais"
                   placeholder="Escriba el pais de procedencia del actor" required="required">
        </div>
        <div class="mb-3">
            <label for="fcNacimiento" class="form-label">Fecha de Nacimiento</label>
            <input type="text" class="form-control" th:field="*{fcNacimiento}" id="fcNacimiento" name="fcNacimiento"
                   placeholder="Escriba la fecha de nacimiento del actor" required="required">
        </div>


        <div id="peliculas-container">
            <table class="table table-hover">
                <thead class="thead-light">
                <tr>
                    <th scope="col">Identificador</th>
                    <th scope="col">Cartelera</th>
                    <th scope="col">Titulo</th>
                    <th scope="col">Genero</th>
                    <th scope="col">Acciones</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="pelicula, iterStat : *{peliculas}">
                    <td th:text="${pelicula.idPelicula}"></td>
                    <td class="imagen-col"> <img th:src="*{peliculas[__${iterStat.index}__].imagen}" th:alt="'Imagen de ' + *{peliculas[__${iterStat.index}__].titulo}" /></td>
                    <td th:text="*{peliculas[__${iterStat.index}__].titulo}" placeholder="Titulo de la pelicula"/></td>
                    <td th:text="*{peliculas[__${iterStat.index}__].genero}" placeholder="Genero"/></td>
                    <td>
                        <button type="button" class="btn btn-danger" th:onclick="|removeActor(${iterStat.index})|">Eliminar</button>
                    </td>
                </tr>
                </tbody>
            </table>
            <button type="button" class="btn btn-secondary" onclick="addActor()">Añadir Actor</button>
        </div>


        <button type="submit" class="btn btn-dark">Guardar</button>
        <input type="hidden" th:field="*{idActor}" />
    </form>
    <hr>
    <a class="btn btn-primary" role="button" th:href="@{/cpeliculas/}">Ir a Inicio</a>
</div>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script th:src="@{/js/bootstrap.min.js}"></script>

</body>
</html>